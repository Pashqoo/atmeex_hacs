# Changelog

Все значимые изменения в этом проекте будут задокументированы в этом файле.

## [0.3.0] - 2025-01-17

### Добавлено
- Датчики (Sensors) для мониторинга состояния устройств
  - **CO2 sensor** - концентрация CO2 в ppm
  - **Temperature sensor** - температура в комнате (°C)
  - **Temperature In sensor** - температура на входе (°C)
  - **Humidity sensor** - влажность в комнате (%)
  
### Улучшено
- Полная поддержка всех данных из API Atmeex
- Sensors автоматически обновляются каждые 60 секунд
- Данные синхронизируются с родным приложением Atmeex

## [0.2.5] - 2025-01-17

### Исправлено
- Ошибка при включении режима обогрева
  - Добавлена проверка на None для target_temperature
  - Используется значение по умолчанию (22°C) если температура не установлена
  - Добавлена проверка диапазона температуры (10-30°C)
  - Исправлена ошибка: "unsupported operand type(s) for *: 'NoneType' and 'int'"

## [0.2.4] - 2025-01-17

### Исправлено
- Ошибка при включении/выключении вентилятора через переключатель
  - Добавлены методы `async_turn_on` и `async_turn_off` для Fan entity
  - Добавлена поддержка управления скоростью через проценты
  - Добавлено обновление состояния вентилятора
  - Исправлена ошибка: "Object fan.master_fan does not support action fan.turn_on"

### Добавлено
- Полная поддержка функций вентилятора
  - Включение/выключение
  - Управление скоростью (проценты)
  - Автоматическое переключение в режим вентиляции при включении

## [0.2.3] - 2025-01-17

### Исправлено
- Ошибка при переключении режима обогрев → вентиляция
  - Добавлена обработка ошибки валидации библиотеки для значения -1000
  - Использован прямой доступ к API через _set_params при ошибке валидации
  - Исправлена ошибка: "set_heat_temp temp not between 100 and 300: -1000"

## [0.2.2] - 2025-01-17

### Добавлено
- Уникальные идентификаторы (unique_id) для всех entities
  - Теперь можно настраивать entities через UI Home Assistant
  - Исправлена проблема: "This entity does not have a unique ID"
- Группировка entities по устройствам (DeviceInfo)
  - Climate и Fan entities теперь группируются в одно устройство
  - Улучшена организация в интерфейсе Home Assistant
- Поддержка логотипа бренда
  - Настроена структура для отображения логотипа в HACS
  - Добавлена информация о бренде в manifest.json
  - Требуется добавление файла brand.png (см. README_BRAND.md)

## [0.2.1] - 2025-01-17

### Исправлено
- Критическая ошибка конвертации температуры
  - API Atmeex использует температуру в формате *10 (100-300 вместо 10-30°C)
  - Добавлена автоматическая конвертация при установке и получении температуры
  - Исправлена ошибка: "set_heat_temp temp not between 100 and 300"

## [0.2.0] - 2025-01-17

### Исправлено
- Исправлена критическая ошибка совместимости с Home Assistant 2024.1+
  - Заменен устаревший метод `async_forward_entry_setup` на `async_forward_entry_setups`
  - Это решает ошибку: `AttributeError: 'ConfigEntries' object has no attribute 'async_forward_entry_setup'`
- Исправлена проблема с обновлением токенов доступа
  - Используется `entry.data.copy()` вместо прямого изменения `entry.data`

### Изменено
- Обновлена версия библиотеки atmeexpy
  - Изменено с `atmeexpy==0.1.0` на `atmeexpy>=0.1.0`
  - Поддержка всех версий библиотеки от 0.1.0 и выше

### Улучшено
- Добавлены комментарии в код для лучшей читаемости
- Обновлена документация

## [0.1.0] - 2024-03-05

### Добавлено
- Первоначальная версия интеграции от @anpavlov
- Поддержка управления бризерами Atmeex через Home Assistant
- Создание climate и fan entities
- Config Flow для настройки через UI

